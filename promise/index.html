<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    
</body>
<script>
    // function test(resolve, reject) {
    //     var timeOut = Math.random() * 2;
    //     log('set timeout to: ' + timeOut + ' seconds.');
    //     setTimeout(function () {
    //         if (timeOut < 1) {
    //             log('call resolve()...');
    //             resolve('200 OK');
    //         }
    //         else {
    //             log('call reject()...');
    //             reject('timeout in ' + timeOut + ' seconds.');
    //         }
    //     }, timeOut * 1000);
    // }
    // var p1 = new Promise(test);
    // var p2 = p1.then(function (result) {
    //     console.log('成功：' + result);
    // });
    // var p3 = p2.catch(function (reason) {
    //     console.log('失败：' + reason);
    // });

    // new Promise(test).then(function (result) {
    //     console.log('成功：' + result);
    // }).catch(function (reason) {
    //     console.log('失败：' + reason);
    // });

    

    function loadImg(src){
        return new Promise((resolve,reject)=>{
            let img = new Image();
            img.src = src;
            img.onload = function(){
                resolve(img);
            }
            img.onerror = function(e){
                reject(e);
            }
        })
    }
    var url = 'http://image.so.com/view?ie=utf-8&src=hao_360so&q=%E7%BE%8E&t=d&correct=%E7%BE%8E&ancestor=list&cmsid=c667df5a3ca9112187814d48c4c194eb&cmran=0&cmras=0&cn=0&gn=0&kn=0&fsn=60&adstar=0#id=d0922efc0591e9a5485c687840b3ab21&currsn=0&ps=60&pc=60';
    loadImg(url).then(res=>{
        document.body.appendChild(res)
    },err=>{
        console.log('err...',err)
    }).then(res1=>{
        console.log(res1)
    },err1=>{
        console.log('err1...',err1)
    }).then(res2=>{
        console.log(res2)
    },err2=>{
        console.log('err2...',err2)
    }).then(res3=>{
        console.log(res3)
    },err3=>{
        console.log('err3...',err3)
    })
</script>
</html>